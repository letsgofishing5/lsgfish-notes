# Javascript

### Promise与setTimeout、process.nextTick()

宏任务有Event Table、Event Queue，微任务有Event Queue

1.宏任务：包括整体代码script，setTimeout，setInterval、I/O、UI 交互事件、setImmediate(Node.js 环境)；

2.微任务：Promise、MutaionObserver、process.nextTick(Node.js 环境)

注：new Promise中的代码会立即执行，then函数分发到微任务队列，process.nextTick分发到微任务队列Event Queue

任务进入执行栈----同步任务还是异步任务----同步的进入主线程，异步的进入Event Table并注册函数。当指定的事情完成时，Event Table会将这个函数移入Event Queue。主线程内的任务执行完毕为空，会去Event Queue读取对应的函数，进入主线程执行。上述过程会不断重复，也就是常说的Event Loop(事件循环)。

3.事件循环，宏任务，微任务的关系如图所示：

![img](https://img-blog.csdn.net/20181010000854394?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMwMzc2Mzc1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
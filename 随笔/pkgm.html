<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>包管理工具 | 笔记</title>
    <meta name="description" content="自学笔记与日常随笔">
    <meta name="generator" content="VitePress v1.0.1">
    <link rel="preload stylesheet" href="/lsgfish-notes/assets/style.B6JN_hMO.css" as="style">
    
    <script type="module" src="/lsgfish-notes/assets/app.CRz0v20A.js"></script>
    <link rel="preload" href="/lsgfish-notes/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/lsgfish-notes/assets/chunks/framework.CXKHhAhX.js">
    <link rel="modulepreload" href="/lsgfish-notes/assets/chunks/theme.2YbutknG.js">
    <link rel="modulepreload" href="/lsgfish-notes/assets/随笔_pkgm.md.DBMtJsuq.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d0a3e7a7><!--[--><!--]--><!--[--><span tabindex="-1" data-v-45efccf3></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45efccf3> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d0a3e7a7 data-v-bf8316e5><div class="VPNavBar top" data-v-bf8316e5 data-v-d2a6f0a8><div class="wrapper" data-v-d2a6f0a8><div class="container" data-v-d2a6f0a8><div class="title" data-v-d2a6f0a8><div class="VPNavBarTitle" data-v-d2a6f0a8 data-v-c290e016><a class="title" href="/lsgfish-notes/" data-v-c290e016><!--[--><!--]--><!----><span data-v-c290e016>笔记</span><!--[--><!--]--></a></div></div><div class="content" data-v-d2a6f0a8><div class="content-body" data-v-d2a6f0a8><!--[--><!--]--><div class="VPNavBarSearch search" data-v-d2a6f0a8><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-d2a6f0a8 data-v-88463ab2><span id="main-nav-aria-label" class="visually-hidden" data-v-88463ab2>Main Navigation</span><!--[--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://www.cnblogs.com/letgofishing/" target="_blank" rel="noreferrer" tabindex="0" data-v-88463ab2 data-v-389968b4><!--[--><span data-v-389968b4>博客</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-d2a6f0a8 data-v-db401546><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-db401546 data-v-2db0c0be data-v-03442093><span class="check" data-v-03442093><span class="icon" data-v-03442093><!--[--><span class="vpi-sun sun" data-v-2db0c0be></span><span class="vpi-moon moon" data-v-2db0c0be></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-d2a6f0a8 data-v-79fbe29b data-v-d83cc2c9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-d83cc2c9 data-v-74b8741b><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-d2a6f0a8 data-v-5d60f9f3 data-v-3ae3b33c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-3ae3b33c><span class="vpi-more-horizontal icon" data-v-3ae3b33c></span></button><div class="menu" data-v-3ae3b33c><div class="VPMenu" data-v-3ae3b33c data-v-d0cfa421><!----><!--[--><!--[--><!----><div class="group" data-v-5d60f9f3><div class="item appearance" data-v-5d60f9f3><p class="label" data-v-5d60f9f3>Appearance</p><div class="appearance-action" data-v-5d60f9f3><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-5d60f9f3 data-v-2db0c0be data-v-03442093><span class="check" data-v-03442093><span class="icon" data-v-03442093><!--[--><span class="vpi-sun sun" data-v-2db0c0be></span><span class="vpi-moon moon" data-v-2db0c0be></span><!--]--></span></span></button></div></div></div><div class="group" data-v-5d60f9f3><div class="item social-links" data-v-5d60f9f3><div class="VPSocialLinks social-links-list" data-v-5d60f9f3 data-v-d83cc2c9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-d83cc2c9 data-v-74b8741b><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-d2a6f0a8 data-v-56764369><span class="container" data-v-56764369><span class="top" data-v-56764369></span><span class="middle" data-v-56764369></span><span class="bottom" data-v-56764369></span></span></button></div></div></div></div><div class="divider" data-v-d2a6f0a8><div class="divider-line" data-v-d2a6f0a8></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-d0a3e7a7 data-v-bbaf15df><div class="container" data-v-bbaf15df><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-bbaf15df data-v-4c7bccde><button data-v-4c7bccde>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-d0a3e7a7 data-v-50b226df><div class="VPDoc has-aside" data-v-50b226df data-v-7a804511><!--[--><!--]--><div class="container" data-v-7a804511><div class="aside" data-v-7a804511><div class="aside-curtain" data-v-7a804511></div><div class="aside-container" data-v-7a804511><div class="aside-content" data-v-7a804511><div class="VPDocAside" data-v-7a804511 data-v-fa71de44><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-fa71de44 data-v-8aeb4c9c><div class="content" data-v-8aeb4c9c><div class="outline-marker" data-v-8aeb4c9c></div><div class="outline-title" role="heading" aria-level="2" data-v-8aeb4c9c>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-8aeb4c9c><span class="visually-hidden" id="doc-outline-aria-label" data-v-8aeb4c9c> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-8aeb4c9c data-v-2d44e95a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-fa71de44></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7a804511><div class="content-container" data-v-7a804511><!--[--><!--]--><main class="main" data-v-7a804511><div style="position:relative;" class="vp-doc _lsgfish-notes_%E9%9A%8F%E7%AC%94_pkgm" data-v-7a804511><div><h1 id="包管理工具" tabindex="-1">包管理工具 <a class="header-anchor" href="#包管理工具" aria-label="Permalink to &quot;包管理工具&quot;">​</a></h1><h2 id="nvm" tabindex="-1">nvm <a class="header-anchor" href="#nvm" aria-label="Permalink to &quot;nvm&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#安装 Node.js 版本：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stable</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #安装最新稳定版的 Node.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #安装指定版本的 Node.js：（例如：nvm install 14.17.0）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#切换 Node.js 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #切换到已安装的其中一个版本,（例如：nvm use 14.17.0）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#查看已安装的 Node.js 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #列出已安装的所有版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls-remote</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #列出远程可用的所有版本</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#卸载 Node.js 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #卸载指定的 Node.js 版本： （例如：nvm uninstall 14.17.0）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#设置默认的 Node.js 版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alias</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #设置默认版本：（例如：nvm alias default 14.17.0）这样，在新打开的终端中将自动使用默认版本。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#运行 Node.js 命令和 npm：</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">versio</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">comman</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #在已安装的 Node.js 版本下运行命令： （例如：nvm exec 14.17.0 node -v）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nvm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">comman</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #在当前使用的 Node.js 版本下运行命令： （例如：nvm run node -v）</span></span></code></pre></div><h2 id="nrm" tabindex="-1">nrm <a class="header-anchor" href="#nrm" aria-label="Permalink to &quot;nrm&quot;">​</a></h2><p>在开发中，我们通常需要安装很多 npm 包，而默认的 npm 源有时候就可能下载很慢，所以就需要切换 npm 源，nrm 就可以帮助我们管理和切换 nrm 源。其特点如下：</p><ul><li><strong>管理多个源</strong>：nrm 允许管理多个 npm 源，例如官方源、淘宝源、cnpm 源等。你可以根据需要快速切换不同的源。</li><li><strong>快速切换</strong>：nrm 提供了快捷的命令来切换 npm 源，无需手动修改配置文件。你可以通过简单的命令在不同的源之间进行切换。</li><li><strong>测试速度</strong>：nrm 可以测试各个源的响应速度，并给出评分，帮助你选择最快的源来加快依赖包的下载速度。</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mrn</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #安装：首先，需要在全局安装 nrm。在命令行中执行以下命令即可：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nrm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #查看可用源：你可以使用以下命令查看当前可用的源列表：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mrn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">源名</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">称</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #切换源：要切换到某个源，可以使用以下命令：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nrm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #测试源的速度：你可以通过以下命令测试各个源的响应速度：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nrm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">源名</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">称</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">源地</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">址</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#添加自定义源：如果你有自定义的源，可以通过以下命令添加：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nrm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> del</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">源名</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">称</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">#删除源：如果要删除已添加的源，可以使用以下命令：</span></span></code></pre></div><h2 id="npm" tabindex="-1">npm <a class="header-anchor" href="#npm" aria-label="Permalink to &quot;npm&quot;">​</a></h2><h3 id="node-cli-命令运行原理" tabindex="-1">Node Cli 命令运行原理 <a class="header-anchor" href="#node-cli-命令运行原理" aria-label="Permalink to &quot;Node Cli 命令运行原理&quot;">​</a></h3><h4 id="创建-node-cli-命令" tabindex="-1">创建 Node CLI 命令 <a class="header-anchor" href="#创建-node-cli-命令" aria-label="Permalink to &quot;创建 Node CLI 命令&quot;">​</a></h4><p>我们先创建一个目录：npm-link-test，然后在根目录下进行 Node 项目初始化操作。即运行以下命令：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>npm init -y</span></span></code></pre></div><p>然后新建目录bin，在bin目录下新建一个index.js文件，这个文件到时是作为一个shell文件进行执行的，需要在文件开头加一行：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">复制代码#</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">usr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">env node</span></span></code></pre></div><p>这段代码的意思是指定脚本解析器类型，本来 Shell 环境只能执行 B-shell 文件，如果要执行 JavaScript 文件则需要指定解析器为 node。</p><p>配置 package.json 文件：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;npm-link-test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./bin/index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这个配置的意思是说，这个指令名称是 <code>npm-link-test</code> 运行之后执行的是 <code>&quot;./bin/index.js&quot;</code> 这个文件的代码。</p><p>因为我们只是为了理解 Node Cli 命令的运行原理，我们只需要在终端输入 <code>npm-link-test</code> 命令能运行起来即可。所以我们在 <code>&quot;./bin/index.js&quot;</code> 文件中加一行能体现我们命令运行成功的代码：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/usr/bin/env node</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;这是测试命令&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>所以只要在终端输入 <code>npm-link-test</code> 然后能打印：&#39;这是测试命令&#39; 即可。</p><h4 id="利用-npm-link-进行本地调试" tabindex="-1">利用 npm link 进行本地调试 <a class="header-anchor" href="#利用-npm-link-进行本地调试" aria-label="Permalink to &quot;利用 npm link 进行本地调试&quot;">​</a></h4><h5 id="全局安装调试" tabindex="-1">全局安装调试 <a class="header-anchor" href="#全局安装调试" aria-label="Permalink to &quot;全局安装调试&quot;">​</a></h5><p>我们开发了一个库包或者一个 Node CLI 工具，是不适合发布到线上进行调试的。所以我们可以利用 npm link 高效地进行本地调试。</p><p>进行全局虚拟安装，在项目根目录下执行以下命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link</span></span></code></pre></div><p>这样就会在系统变量 PATH 设置的 Node 命令安装的目录下创建了以下可执行的命令文件：</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6fbac3e949b9431a990163c375487a6a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=280&amp;h=77&amp;s=2903&amp;e=png&amp;b=fffefe" alt="npm-link-test.png"></p><p>这样我们就可以在命令终端输入 npm-link-test 命令了。</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a0024857e52449fa5894ea5ea73e259~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=486&amp;h=46&amp;s=3010&amp;e=png&amp;b=1e1e1e" alt="npm-link-test-1.png"></p><p>我们可以看到成功打印了我们上面设置的代码。</p><p>其实我们执行 npm link 命令相当于执行了全局安装，它会把我们的项目安装到全局的 node_modules 目录文件下。</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38c9ca4d85e740718c067f1058b7224b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=282&amp;h=360&amp;s=8435&amp;e=png&amp;b=ffffff" alt="npm-link-test-2.png"></p><p>我们打开上面的任意一个命令文件看一下：</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66ab0c2abf224e7db355743080c8e136~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=715&amp;h=259&amp;s=16080&amp;e=png&amp;b=1e1e1e" alt="npm-link-test-3.png"></p><p>所以我们通过查看全局安装的命令文件可以得知，当在终端执行 <code>npm-link-test</code> 命令的时候，实际执行的是当前目录下的 <code>node_modules/npm-link-test/bin/index.js</code> 文件，也就是我们上面写的 bin 文件。</p><p>当然别忘了，调试结束后执行 npm unlink 命令取消安装关联。</p><h5 id="局部安装调试" tabindex="-1">局部安装调试 <a class="header-anchor" href="#局部安装调试" aria-label="Permalink to &quot;局部安装调试&quot;">​</a></h5><p>我们上面是通过全局安装进行调试，但我们有可能需要进行具体项目的局部安装，也就是安装到具体的项目中。我们可以进入具体项目的根目录下执行：</p><div class="language-perl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">perl</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> npm-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-test</span></span></code></pre></div><p>但此种方式有可能会报错，我们还可以通过以下方式安装：</p><div class="language-perl vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">perl</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npx </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> L:\work2022\t\npm-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-test</span></span></code></pre></div><p>也就是 <code>npx link &lt;package-path&gt;</code> 方式。这样就可以在具体的项目中的 <code>node_modules/bin</code> 目录中安装了相关命令文件。</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1cfe9012efe433ea10adf3c762b48d0~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=407&amp;h=72&amp;s=2543&amp;e=png&amp;b=252526" alt="npm-link-test-4.png"></p><p>这个时候我们删掉全局安装的命令文件，再在命令终端输入 <code>npm-link-test</code> 发现报错了。</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e6618925854941dc932b76106924b886~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=486&amp;h=139&amp;s=7839&amp;e=png&amp;b=1e1e1e" alt="npm-link-test-5.png"></p><p>也就是局部安装的命令无法通过终端命令进行运行。但我们可以通过 package.json 文件中的 scripts 选项进行自定义脚本来进行局部安装的命令。</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npm-link-test&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这个时候我们在终端键入 <code>npm run test</code>，运行结果如下：</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d53efe6dad4244a38ad012db790649e3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=418&amp;h=110&amp;s=4819&amp;e=png&amp;b=1e1e1e" alt="npm-link-test-6.png"></p><h4 id="小结" tabindex="-1">小结 <a class="header-anchor" href="#小结" aria-label="Permalink to &quot;小结&quot;">​</a></h4><p>Node CLI 命令就是通过在 JavaScript 文件头部添加 Shell 脚本声明，然后通过 package.json 文件的 bin 选项定义 Node CLI 命令名称及 Shell 脚本文件的位置。然后安装的时候就会根据 package.json 文件的 bin 选项声明的 Node CLI 命令名称生成不同平台的命令文件，命令文件的主要内容就执行 Node CLI 命令文件的内容。通常安装的时候随着项目安装到对应的 <code>node_modules</code> 目录下，局部安装的时候 Node CLI 命令文件是在 <code>node_modules/bin</code> 目录中，全局安装的时候 Node CLI 命令文件则在系统环境变量 PATH 设置的 node 命令所在的目录中。</p><h3 id="npm-link" tabindex="-1">npm link <a class="header-anchor" href="#npm-link" aria-label="Permalink to &quot;npm link&quot;">​</a></h3><p>npm link 命令可以将当前的包软连接到电脑全局的 node_modules/bin目录下，然后可以系统全局执行一些预设命令。也可以使用</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unlink</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">package-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>的命令将软连接删除。</p><p>但是该删除功能并不能直接将全局node_modules/bin目录下的链接删除掉。可以执行</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">package-nam</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>的方式进行删除</p><p>这个时候如果重新在包根目录下运行 npm link 报错 ，可以执行缓存清理</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force</span></span></code></pre></div><h3 id="幽灵依赖" tabindex="-1">幽灵依赖 <a class="header-anchor" href="#幽灵依赖" aria-label="Permalink to &quot;幽灵依赖&quot;">​</a></h3><p>幽灵依赖的来历：由于早期npm 3版本前的包管理模式有依赖嵌套问题，会造成文件路径过长，占用大量磁盘等问题，后来参考了社区的 yarn 包管理器的解决方案。将所有的依赖进行平铺，不再一层一层进行嵌套了，这样重复的依赖也只剩一个了，同时也不会存在路径过长的问题。但是解决了依赖地狱问题，但也形成了新的问题：幽灵依赖。因为所有的依赖都进行平铺了，所以依赖的依赖，也可以进行引用使用了。也就是一些没有被定义在项目中的 package.json 文件中的包，也可以进行导入使用了。但又因为没有显式在 packages 中进行声明引用，将来有一天你引用的那个主包不再使用了，而你的项目中还引用着它包中的依赖，自然就会出错了。这个就是幽灵依赖会导致的问题。</p><p><a href="https://juejin.cn/post/7161063570594070559#heading-24" target="_blank" rel="noreferrer">详情相关链接</a></p><h2 id="pnpm" tabindex="-1">pnpm <a class="header-anchor" href="#pnpm" aria-label="Permalink to &quot;pnpm&quot;">​</a></h2><p><a href="https://www.pnpm.cn/" target="_blank" rel="noreferrer">官方文档</a></p><h4 id="monorepo环境下一次性构建所有的应用" tabindex="-1">monorepo环境下一次性构建所有的应用 <a class="header-anchor" href="#monorepo环境下一次性构建所有的应用" aria-label="Permalink to &quot;monorepo环境下一次性构建所有的应用&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;build-all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pnpm recursive run build&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-7a804511 data-v-91928579><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"DFwREXJP\",\"overview_index.md\":\"CvAE6Q-S\",\"随笔_css_mode.md\":\"CubfDUWF\",\"随笔_packagejson.md\":\"DGerZzL4\",\"随笔_async与await的异步传染.md\":\"BVubhIQz\",\"无目录文档_高德地图.md\":\"M5XCycTV\",\"随笔_monorepo_pnpm.md\":\"87SRTAP8\",\"随笔_pkgm.md\":\"DBMtJsuq\",\"无目录文档_算法.md\":\"CIoq-DUF\",\"无目录文档_mysql.md\":\"DXO_RsyV\",\"随笔_cesium-snippet.md\":\"Cg_xqCfI\",\"随笔_element-plus组件库打包记录.md\":\"D1XExToH\",\"随笔_cesium.md\":\"B6Nf6FoV\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"笔记\",\"description\":\"自学笔记与日常随笔\",\"base\":\"/lsgfish-notes/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"zh\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}},\"nav\":[{\"text\":\"博客\",\"link\":\"https://www.cnblogs.com/letgofishing/\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>
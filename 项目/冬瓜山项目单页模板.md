```vue
<template>
  <div>
    <el-row class="uni-row-bottom-20px" :gutter="20">
      <el-col>
        <el-card class="box-card">
          <div slot="header" class="clearfix">
            <span>查询条件</span>
          </div>
          <el-form ref="listQuery" :inline="true" :model="listQuery" class="demo-form-inline">
            <el-form-item prop="test" label="部门名称">
              <el-input v-model.trim="listQuery.test" placeholder="请输入部门名称" clearable />
            </el-form-item>
            <el-form-item>
              <el-button type="success" round icon="el-icon-search" @click="getList('numberWork')">查询</el-button>
              <el-button round @click="resetForm('listQuery')">重置</el-button>
            </el-form-item>
          </el-form>
        </el-card>
      </el-col>
    </el-row>

    <el-row :gutter="20">
      <el-col>
        <el-card class="box-card">
          <template>
            <el-table
              v-loading="loading"
              height="500"
              border
              :data="tableData"
              stripe
              style="width: 100%"
            >
              <el-table-column
                align="center"
                type="index"
                prop="feeName"
                width="150"
                label="序号"
              />
              <el-table-column
                align="center"
                prop="feeName"
                label="部门名称"
              />
              <el-table-column
                align="center"
                prop="feeName"
                label="员工总数"
              />
              <el-table-column
                align="center"
                prop="feeName"
                label="实到人数"
              />
            </el-table>
          </template>
          <!--          分页-->
          <el-pagination
            :page-size="listQuery.pageSize"
            :current-page="listQuery.pageNum"
            layout="total, prev, pager, next, jumper"
            :total="total"
            @current-change="handlePageChange"
          />
        </el-card>
      </el-col>
    </el-row>
  </div>
</template>

<script>
import crud from '@/views/clocking-in/js/crud'
export default {
  name: 'Index',
  mixins: [crud],
  props: {
    communityId: {
      type: Number,
      default: 0
    }
  },
  data() {
    var validateFiled = (rule, value, callback) => {
      if (value === '') {
        callback(new Error('请添加字典编码'))
      } else {
        callback()
      }
    }
    return {
      title: '添加',
      loading: false,
      dialogLoading: false,
      total: 0,
      form: {},
      tableData: [],
      listQuery: {
        pageSize: 10,
        pageNum: 1,
        test: ''
      },
      rules: {
        pointObjId: [
          { required: true, validator: validateFiled, trigger: 'blur' }
        ],
        inspectionName: [
          { required: true, message: '请输入巡检点名称', trigger: 'blur' }
        ]
      },
      dialogVisible: false
    }
  },
  created() {
    
  }
}
</script>

<style scoped lang="scss">
</style>

```

## crud.js

```js
export default {
  data() {
    return {
      listQuery: {
        pageSize: 10,
        pageNum: 1
      },
      total: 0
    };
  },
  methods: {
    /**
     * 重置表单
     * @param formName
     */
    resetForm(formName) {
      this.$refs[formName].resetFields();
    },
    /**
     *  提交表单，进行校验
     * @param formName
     */
    submitForm(formName) {
      this.$refs[formName].validate(valid => {
        if (valid) {
          this.onSubmit();
        } else {
          return false;
        }
      });
    },
    /**
     * 获取字典表数据
     * @param fileds 是一个字符串类型，以逗号分隔
     */
    getDictValue(fileds) {
      this.uniApi.getDictValue(fileds).then(data => {
        data.forEach(item => {
          if (item.filed === '38') {
            this.punchType = item.parent;
          }
        });
      });
    },
    /**
     * 点击取消时关闭模态窗口和重置表单
     * @param dialog 模态窗口关闭时时需要控制的变量
     * @param formName 需要清空的表单名
     */
    cancel(dialog, formName) {
      this[dialog] = false;
      this.resetForm(formName);
    },
    /**
     * 点击编辑按钮时打开模态窗口，并且给表单赋值
     * @param row 点击的表格行，整行数据
     * @param dialog 模态窗口打开的变量
     */
    handleEdit(row, dialog) {
      this.title = '修改';
      this.$nextTick(() => {
        for (const i in row) {
          this.form[i] = row[i];
        }
      });
      this[dialog] = true;
    },
    /**
     * 删除
     * @param row
     * @param funcName
     */
    handleDel(row, funcName) {
      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {
        confirmButtonText: '确定',
        cancelButtonText: '取消',
        type: 'warning'
      }).then(() => {
        this.loading = true;
        this.uniApi.切换自己的名字[funcName](row).then(() => {
          this.loading = false;
          this.$message.success('删除成功');
          this.getList('intelligentGetList');
        }).catch(() => {
          this.loading = false;
        });
      }).catch(() => {
        this.$message({
          type: 'info',
          message: '已取消删除'
        });
      });
    },
    /**
     * 分页查询
     * @param pageNum
     */
    handlePageChange(funcName, pageNum) {
      this.listQuery.pageNum = pageNum;
      this.getList(funcName);
    },
    /**
     * 获取当前页表格总信息
     * @param funcName
     */
    getList(funcName) {
      this.loading = true;
      this.uniApi.切换自己模块的名字[funcName](this.listQuery).then(data => {
        this.tableData = data.list;
        this.total = data.total;
      }).finally(() => {
        this.loading = false;
      });
    }
  }
};

```


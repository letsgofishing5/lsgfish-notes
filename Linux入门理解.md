## 网络连接概念

- IP地址时一种逻辑地址，用来标识网络中一个个主机
  - IP地址 = 网络地址 + 主机地址
  - IP地址是一个 4 * 8bit (1字节) 由 0/1 组成的数字串（IP协议）
- 子网掩码NETMASK
  - 子网掩码只有一个功能，就是将IP地址划分为 网络地址 + 主机地址
  - 子网掩码与 IP地址进行**与运算**（都为1 的则结果为1，否则为 0）
- 默认网关 GETWAY
  - 连接两个不同的网络的设备都可以叫网关设备；网关的作用就是实现两个网络之间进行通讯与控制
  - 网关的地址就是网关设备的IP地址
- 域名服务器DNS
  - DNS是域名服务器，用来解析域名的（域名与IP之间的解析）
  - 如果没有这东西，登录某个网站就必须输入该网站的IP地址，有了DNS就可以直接输入网址

#### 网络连接

- 桥接模式
  - 同一个网段，IP容易冲突
- NAT模式
  - 在当前主机下建立新的子网络，确保子网络IP不会和其他IP冲突

#### 设置网络连接

删除 UUID一行

修改BOOTPROTO=static、NOBOOT=yes

添加IPADDR、NETMASK、GATEWAY、DNS1

![image-20211213192545203](Linux入门理解-img/image-20211213192545203.png)



## 常用命令

#### 系统服务命令

1. systemctl start 服务名：启动服务
2. systemctl stop 服务名：关闭服务（临时的）
3. systemctl status 服务名：查看服务状态
4. systemctl restart 服务名：重启服务
5. systemctl disable 服务名：关闭服务自启动
6. systemctl enable 服务名：开启服务自启动
7. systemctl --type service：查看正在运行的服务
8. systemctl list-unit-files：查看所有服务器的自启配置

#### 其他命令

1. useradd：libai 添加用户
2. passwd：libai 给**libai**添加密码用户添加密码
3. whereis file-name：查看文件
4. whoami：查看当前用户是谁
5. ll -a：查看隐藏文件
6. echo $$：显示当前进程
7. shutdown -h/-r now：立即关机/重启
8. reboot：重启计算机
9. sync：把内存的数据同步到磁盘中

#### 特殊字符

1. $：代表变量
2. *：代表通配符
3. ~：代表当前用户的主目录（root的主目录是/root，普通用户的主目录是 /home/）
4. -：一个缩写参数（一个杠杠）
5. --：一个单词参数（两个杠杠）

## Linux文件系统

Linux下一切皆文件

#### Linux文件目录

```bash
# 挂载磁盘，将硬盘3挂载到/usr/upload下
mount /dev/disk3 /usr/upload

bin ->usr/bin：这个目录存放经常使用的命令
sbin ->超级管理员使用的命令
boot：这个目录存放启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件

etc：这个目录存放所有的系统管理所需要的配置文件
dev：dev是device（设备）的缩写，该目录下存放的是Linux外部设备，Linux中的设备也是以文件形式存在的

root：该目录为系统管理员目录，root是具有超越权限的用户
home：普通用户的主目录，在Linux中，每个用户都有一个自己的文件夹目录，一般该文件夹以用户名的账号命名

lib ->usr/lib：这个，目录存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件
      ，几乎所有的应用程序都需要用到这些共享库

mnt：系统提供该目录是为了让用户临时挂载别的文件系统，我们可以将光驱挂载在/mnt/上，然后进入
      该目录就可以查看光驱里的内容

usr：这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于Windows下的program files目录
/usr/local：一般用于安装软件
/opt：用于存放软件的包，这些包通常安装在/usr/local目录下

var：这个目录存放着在不断扩充着的东西，我们习惯将那些经常被修改的文件存放在该目录下，比如运行各种日志文件

tmp：这个目录是用来存放一些临时文件的
```

#### 操作文件

```bash
#创建文件夹
mkdir dir
#创建文件
touch file
#查看文件目录
ll
ls
ll -a #查看所有文件（包含隐藏文件）

```

### vi与vim

- 正常模式

> 以vim打开一个档案就直接进入一般模式了(这是默认的模式)。在这个模式中,你可以使用「上下左右」按键来移动光标,你可以使用「删除宇符」或「删除整行」 来处理档案容,也可以使用复制、粘贴J来处理你的文件数据。

- 插入模式

> 按下 i，I，o, O, a, A, r, R等任何一个字母之后才会进入编辑模式，一般来说按 i 即可.

- 命令行模式

> 按下esc进入正常模式，按下冒号：，进入命令行模式，在这个模式当中,可以提供你相关指令, 完成读取、存盘、替换、离开vim、显示行号等的动作则是在此模式中达成的!

#### 快捷键

1. 拷贝当前行：yy，拷贝当前行向下5行：5yy，并粘贴（输入p）

2. 删除当前行：dd，删除当前行向下5行：5dd

3. 设置行号：以冒号开头，set nu

   ```
   //设置行号
   :set nu
   //取消行号
   :set nonu
   ```

4. 查找文件中的某个单词：以斜杠开头，输入关键词，按 n 键查找下一个

   ```
   /abc
   ```

5. 首行，尾行

   ```
   //首行
   gg
   //尾行
   G
   ```

6. 跳转多少行，跳转第35行：

   ```
   35+shift+g
   ```

7. 撤回/恢复：

   ```bash
   #撤回
   u
   #恢复
   CTRL + r
   ```

### 用户管理

#### 用户添加删除

```bash
#添加用户，默认在home目录下创建同名目录
useradd 用户名
#设置密码
passwd 用户名
#删除用户，但是保留主目录
userdel 用户名
#删除用户及主目录
userdel -r 用户名
```

#### 查看用户信息

```bash
#查看用户信息
id root
uid=0(root) gid=0(root) 组=0(root)
```

#### 用户组

```bash
#新增用户组
groupadd 组名
#删除用户组
groupdel 组名
#添加用户时直接分配组
useradd 用户名 -g 用户组名
#修改用户的组
usermod 用户名 -g 用户组名
```

##### 用户和组相关文件

```
/etc/passwd 文件
用户( user )的配置文件,记录用户的各种信息
每行的含义:用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell

/etc/shadow 文件
口令的配置文件
每行的含义:登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志

/etc/group 文件
组(group)的配置文件,记录Linux包含的组的信息
每行含义:组名:口令:组标识号:组内用户列表
```

### 实用指令

#### 运行级别

> 0：关机
>
> 1：单用户【找回丢失密码】
>
> 2：多用户状态没有网络服务
>
> 3：多用户状态有网络服务
>
> 4：系统未使用保留给用户
>
> 5：图形界面
>
> 6：系统重启
>
> 常用的运行级别是 3 和 5，也可以指定默认运行级别

```bash
#切换级别
init 0 #关机
#查看当前级别
systemctl get-default
#设置默认级别
systemctl set-default multi-user.target #设置多用户网络级别
systemctl set-default graphical.target #设置图形化界面
```

#### 找回root密码

仅Centos7版本后有效

1. 重启系统，在进入登记页面前，选择core，然后按 e 键
2. 进入后找到 UTF-8，在后面输入 init=/bin/sh，然后快捷键 CTRL+x 进入单用户模式
3. 在光标闪烁的位置中输入：mount -o remount,rw /
4. 在新的一行输入：passwd，然后回车输入新密码（密码长度最好8位以上，但不是必须的）密码修改成功后，会显示passwd字样说明密码修改成功
5. 在光标闪烁的位置中输入：touch /.autorelabel
6. 继续在闪烁的位置输入：exec /sbin/init （这个过程有点长，耐心等待），完成后系统会自动重启，新的密码就生效了

#### 帮助指令

```bash
#获取指令 ll 的帮助信息
man ls
help ls
```

#### 文件目录指令

```bash
#创建目录
mkdir one
#创建多级目录
mkdir one/two/three -p
#删除目录、文件。-r：递归，-f：强制
rm -rf 文件/目录  

#拷贝文件/目录。-r：递归，
cp 拷贝源 拷贝到哪里
#强制覆盖同名文件
\cp 拷贝源 拷贝到哪里

#分屏查看文件内容。空白键 向下翻页，pageup 向上翻页，q 退出
less 文件名
#查看文件前10行（默认）
head 文件名
head 文件名 -n 5 #指定查看前5行
#查看文件后10行（默认）
tail 文件名
tail 文件名 -n 5 #指定查看后5行

#输出内容到控制台
echo $PATH
# 重定向 >
echo 'hello world' > 文件名 #将 hello world 内容输入到文件中
echo 'hello world' >> 文件名 #将 hello world 内容追加到文件中
ll > 文件名 #将查询到的结果写入到文件中
```



